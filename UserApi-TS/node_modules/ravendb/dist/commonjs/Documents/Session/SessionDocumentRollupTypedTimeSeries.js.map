{"version":3,"file":"SessionDocumentRollupTypedTimeSeries.js","sourceRoot":"","sources":["../../../../src/Documents/Session/SessionDocumentRollupTypedTimeSeries.ts"],"names":[],"mappings":";;;AAAA,yEAAmE;AAInE,8FAAwF;AACxF,2DAAqD;AAErD,MAAa,oCAAuD,SAAQ,gDAAqB;IAE5E,MAAM,CAAsB;IAI7C,YAAmB,OAA0C,EAAE,kBAAgC,EAAE,IAAY,EAAE,KAA0B;QACrI,KAAK,CAAC,OAAO,EAAE,kBAAkB,EAAE,IAAI,CAAC,CAAC;QAEzC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,CAAC;IAMM,KAAK,CAAC,GAAG,CAAC,IAAW,EAAE,EAAS,EAAE,QAAgB,CAAC,EAAE,WAAmB,sBAAQ,CAAC,SAAS;QAC7F,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC;YAC7B,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,wBAAwB,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;YAErF,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,0DAA0B,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QAClF,CAAC;QAED,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC1E,OAAO,OAAO;aACT,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,0DAA0B,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;IACxE,CAAC;IAEM,MAAM,CAAC,KAAoC;QAC9C,MAAM,MAAM,GAAG,KAAK,CAAC,oBAAoB,EAAE,CAAC;QAC5C,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,SAAS,EAAE,MAAM,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;IAC7D,CAAC;CACJ;AAhCD,oFAgCC","sourcesContent":["import { SessionTimeSeriesBase } from \"./SessionTimeSeriesBase.js\";\r\nimport { ISessionDocumentRollupTypedTimeSeries } from \"./ISessionDocumentRollupTypedTimeSeries.js\";\r\nimport { ClassConstructor } from \"../../Types/index.js\";\r\nimport { InMemoryDocumentSessionOperations } from \"./InMemoryDocumentSessionOperations.js\";\r\nimport { TypedTimeSeriesRollupEntry } from \"./TimeSeries/TypedTimeSeriesRollupEntry.js\";\r\nimport { TypeUtil } from \"../../Utility/TypeUtil.js\";\r\n\r\nexport class SessionDocumentRollupTypedTimeSeries<T extends object> extends SessionTimeSeriesBase implements ISessionDocumentRollupTypedTimeSeries<T> {\r\n\r\n    private readonly _clazz: ClassConstructor<T>;\r\n\r\n    public constructor(session: InMemoryDocumentSessionOperations, entity: any, name: string, clazz: ClassConstructor<T>);\r\n    public constructor(session: InMemoryDocumentSessionOperations, documentId: string, name: string, clazz: ClassConstructor<T>);\r\n    public constructor(session: InMemoryDocumentSessionOperations, documentIdOrEntity: string | any, name: string, clazz: ClassConstructor<T>) {\r\n        super(session, documentIdOrEntity, name);\r\n\r\n        this._clazz = clazz;\r\n    }\r\n\r\n    public async get(): Promise<TypedTimeSeriesRollupEntry<T>[]>;\r\n    public async get(from: Date, to: Date): Promise<TypedTimeSeriesRollupEntry<T>[]>;\r\n    public async get(from: Date, to: Date, start: number): Promise<TypedTimeSeriesRollupEntry<T>[]>;\r\n    public async get(from: Date, to: Date, start: number, pageSize: number): Promise<TypedTimeSeriesRollupEntry<T>[]>\r\n    public async get(from?: Date, to?: Date, start: number = 0, pageSize: number = TypeUtil.MAX_INT32): Promise<TypedTimeSeriesRollupEntry<T>[]> {\r\n        if (this._notInCache(from, to)) {\r\n            const results = await this.getTimeSeriesAndIncludes(from, to, null, start, pageSize);\r\n\r\n            return results.map(x => TypedTimeSeriesRollupEntry.fromEntry(x, this._clazz));\r\n        }\r\n\r\n        const results = await this._getFromCache(from, to, null, start, pageSize);\r\n        return results\r\n            .map(x => TypedTimeSeriesRollupEntry.fromEntry(x, this._clazz));\r\n    }\r\n\r\n    public append(entry: TypedTimeSeriesRollupEntry<T>) {\r\n        const values = entry.getValuesFromMembers();\r\n        this._appendInternal(entry.timestamp, values, entry.tag);\r\n    }\r\n}"]}