{"version":3,"file":"AbstractRawJavaScriptIndexCreationTask.js","sourceRoot":"","sources":["../../../../src/Documents/Indexes/AbstractRawJavaScriptIndexCreationTask.ts"],"names":[],"mappings":"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","sourcesContent":["import { IndexDefinition } from \"./IndexDefinition.js\";\r\nimport { AbstractIndexCreationTaskBase } from \"./AbstractIndexCreationTaskBase.js\";\r\nimport { INDEXES } from \"../../Constants.js\";\r\n\r\n/**\r\n * Utility class to create javascript based indexes using not-strongly typed syntax.\r\n *\r\n * Use AbstractJavaScriptIndexCreationTask for strongly-typed javascript indexes.\r\n */\r\nexport class AbstractRawJavaScriptIndexCreationTask extends AbstractIndexCreationTaskBase<IndexDefinition> {\r\n\r\n    private readonly _definition: IndexDefinition = new IndexDefinition();\r\n\r\n    protected constructor() {\r\n        super();\r\n    }\r\n\r\n    public get maps() {\r\n        return this._definition.maps;\r\n    }\r\n\r\n    public set maps(value) {\r\n        this._definition.maps = value;\r\n    }\r\n\r\n    public get fields() {\r\n        return this._definition.fields;\r\n    }\r\n\r\n    public set fields(value) {\r\n        this._definition.fields = value;\r\n    }\r\n\r\n    public get reduce() {\r\n        return this._definition.reduce;\r\n    }\r\n\r\n    public set reduce(value) {\r\n        this._definition.reduce = value;\r\n    }\r\n\r\n    public get isMapReduce(): boolean {\r\n        return !!this.reduce;\r\n    }\r\n\r\n    /**\r\n     * @return If not null than each reduce result will be created as a document in the specified collection name.\r\n     */\r\n    public get outputReduceToCollection() {\r\n        return this._definition.outputReduceToCollection;\r\n    }\r\n\r\n    /**\r\n     * @param value If not null than each reduce result will be created as a document in the specified collection name.\r\n     */\r\n    public set outputReduceToCollection(value) {\r\n        this._definition.outputReduceToCollection = value;\r\n    }\r\n\r\n    /**\r\n     * @return Defines a collection name for reference documents created based on provided pattern\r\n     */\r\n    public get patternReferencesCollectionName() {\r\n        return this._definition.patternReferencesCollectionName;\r\n    }\r\n\r\n    /**\r\n     * @param value Defines a collection name for reference documents created based on provided pattern\r\n     */\r\n    public set patternReferencesCollectionName(value: string) {\r\n        this._definition.patternReferencesCollectionName = value;\r\n    }\r\n\r\n    /**\r\n     * @return Defines a collection name for reference documents created based on provided pattern\r\n     */\r\n    public get patternForOutputReduceToCollectionReferences() {\r\n        return this._definition.patternForOutputReduceToCollectionReferences;\r\n    }\r\n\r\n    /**\r\n     * @param value Defines a collection name for reference documents created based on provided pattern\r\n     */\r\n    public set patternForOutputReduceToCollectionReferences(value: string) {\r\n        this._definition.patternForOutputReduceToCollectionReferences = value;\r\n    }\r\n\r\n    public createIndexDefinition(): IndexDefinition {\r\n        this._definition.name = this.getIndexName();\r\n        this._definition.type = this.isMapReduce ? \"JavaScriptMapReduce\" : \"JavaScriptMap\";\r\n        this._definition.name = this.getIndexName();\r\n\r\n        if (this.additionalSources) {\r\n            this._definition.additionalSources = this.additionalSources;\r\n        } else {\r\n            this._definition.additionalSources = {};\r\n        }\r\n\r\n        this._definition.additionalAssemblies = this.additionalAssemblies || [];\r\n\r\n        this._definition.configuration = this.configuration;\r\n        this._definition.lockMode = this.lockMode;\r\n        this._definition.priority = this.priority;\r\n        this._definition.state = this.state;\r\n        this._definition.deploymentMode = this.deploymentMode;\r\n\r\n        if (this.searchEngineType && this.searchEngineType !== \"None\") {\r\n            this._definition.configuration[INDEXES.INDEXING_STATIC_SEARCH_ENGINE_TYPE] = this.searchEngineType;\r\n        } else if (this._definition.fields && Object.values(this._definition.fields).some(fieldOptions => fieldOptions.vector)) {\r\n            this._definition.configuration[INDEXES.INDEXING_STATIC_SEARCH_ENGINE_TYPE] = \"Corax\";\r\n        }\r\n\r\n        return this._definition;\r\n    }\r\n}\r\n"]}