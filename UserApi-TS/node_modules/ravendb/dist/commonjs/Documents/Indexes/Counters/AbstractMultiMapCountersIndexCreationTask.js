"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AbstractMultiMapCountersIndexCreationTask = void 0;
const AbstractGenericCountersIndexCreationTask_js_1 = require("./AbstractGenericCountersIndexCreationTask.js");
const index_js_1 = require("../../../Exceptions/index.js");
const CountersIndexDefinitionBuilder_js_1 = require("./CountersIndexDefinitionBuilder.js");
const DocumentConventions_js_1 = require("../../Conventions/DocumentConventions.js");
class AbstractMultiMapCountersIndexCreationTask extends AbstractGenericCountersIndexCreationTask_js_1.AbstractGenericCountersIndexCreationTask {
    maps = [];
    _addMap(map) {
        if (!map) {
            (0, index_js_1.throwError)("InvalidArgumentException", "Map cannot be null");
        }
        this.maps.push(map);
    }
    createIndexDefinition() {
        if (!this.conventions) {
            this.conventions = new DocumentConventions_js_1.DocumentConventions();
        }
        const indexDefinitionBuilder = new CountersIndexDefinitionBuilder_js_1.CountersIndexDefinitionBuilder(this.getIndexName());
        indexDefinitionBuilder.indexesStrings = this._indexesStrings;
        indexDefinitionBuilder.analyzersStrings = this._analyzersStrings;
        indexDefinitionBuilder.reduce = this._reduce;
        indexDefinitionBuilder.storesStrings = this._storesStrings;
        indexDefinitionBuilder.suggestionsOptions = this._indexSuggestions;
        indexDefinitionBuilder.termVectorsStrings = this._termVectorsStrings;
        indexDefinitionBuilder.spatialIndexesStrings = this._spatialOptionsStrings;
        indexDefinitionBuilder.vectorFieldStrings = this._vectorOptionsStrings;
        indexDefinitionBuilder.outputReduceToCollection = this._outputReduceToCollection;
        indexDefinitionBuilder.patternForOutputReduceToCollectionReferences = this._patternForOutputReduceToCollectionReferences;
        indexDefinitionBuilder.patternReferencesCollectionName = this._patternReferencesCollectionName;
        indexDefinitionBuilder.additionalSources = this.additionalSources;
        indexDefinitionBuilder.additionalAssemblies = this.additionalAssemblies;
        indexDefinitionBuilder.configuration = this.configuration;
        indexDefinitionBuilder.lockMode = this.lockMode;
        indexDefinitionBuilder.priority = this.priority;
        indexDefinitionBuilder.state = this.state;
        indexDefinitionBuilder.deploymentMode = this.deploymentMode;
        const indexDefinition = indexDefinitionBuilder.toIndexDefinition(this.conventions, false);
        indexDefinition.maps = new Set(this.maps);
        return indexDefinition;
    }
}
exports.AbstractMultiMapCountersIndexCreationTask = AbstractMultiMapCountersIndexCreationTask;
//# sourceMappingURL=AbstractMultiMapCountersIndexCreationTask.js.map