import { AbstractSubscriptionWorker } from "./AbstractSubscriptionWorker.js";
import { SubscriptionBatch } from "./SubscriptionBatch.js";
import { RequestExecutor } from "../../Http/RequestExecutor.js";
export class SubscriptionWorker extends AbstractSubscriptionWorker {
    _store;
    constructor(options, withRevisions, documentStore, dbName) {
        super(options, withRevisions, documentStore.getEffectiveDatabase(dbName));
        this._store = documentStore;
    }
    getRequestExecutor() {
        return this._store.getRequestExecutor(this._dbName);
    }
    setLocalRequestExecutor(url, opts) {
        if (this._subscriptionLocalRequestExecutor) {
            this._subscriptionLocalRequestExecutor.dispose();
        }
        this._subscriptionLocalRequestExecutor = RequestExecutor.createForSingleNodeWithoutConfigurationUpdates(url, this._dbName, opts);
        this._store.registerEvents(this._subscriptionLocalRequestExecutor);
    }
    createEmptyBatch() {
        return new SubscriptionBatch(this._documentType, this._revisions, this._subscriptionLocalRequestExecutor, this._store, this._dbName);
    }
    trySetRedirectNodeOnConnectToServer() {
        // no-op
    }
}
//# sourceMappingURL=SubscriptionWorker.js.map